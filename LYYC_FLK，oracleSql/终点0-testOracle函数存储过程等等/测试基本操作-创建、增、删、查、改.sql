--/*
DROP TABLE A_TB_TEST;

CREATE TABLE A_TB_TEST
(
  IIndex number(9),
  COL01 VARCHAR2(50),
  COL02 VARCHAR2(50),
  COL03 VARCHAR2(50),
  COL04 VARCHAR2(50)
);

INSERT INTO A_TB_TEST(IIndex, COL01, COL02, COL03, COL04) VALUES(SEQ_AUTO_INCRMENT_ONE.NEXTVAL, 'A1', 'B1', 'C1', 'D1');
INSERT INTO A_TB_TEST(IIndex, COL01, COL02, COL03, COL04) VALUES(SEQ_AUTO_INCRMENT_ONE.NEXTVAL, 'A1', 'B1', 'C1', 'D1');
INSERT INTO A_TB_TEST(IIndex, COL01, COL02, COL03, COL04) VALUES(SEQ_AUTO_INCRMENT_ONE.NEXTVAL, 'A1', 'B1', 'C1', 'D2');
INSERT INTO A_TB_TEST(IIndex, COL01, COL02, COL03, COL04) VALUES(SEQ_AUTO_INCRMENT_ONE.NEXTVAL, 'A1', 'B1', 'C1', 'D3');
INSERT INTO A_TB_TEST(IIndex, COL01, COL02, COL03, COL04) VALUES(SEQ_AUTO_INCRMENT_ONE.NEXTVAL, 'A1', 'B1', 'C2', 'D1'); --行DEL01
INSERT INTO A_TB_TEST(IIndex, COL01, COL02, COL03, COL04) VALUES(SEQ_AUTO_INCRMENT_ONE.NEXTVAL, 'A1', 'B1', 'C3', 'D1');
INSERT INTO A_TB_TEST(IIndex, COL01, COL02, COL03, COL04) VALUES(SEQ_AUTO_INCRMENT_ONE.NEXTVAL, 'A1', 'B2', 'C3', 'D1');
INSERT INTO A_TB_TEST(IIndex, COL01, COL02, COL03, COL04) VALUES(SEQ_AUTO_INCRMENT_ONE.NEXTVAL, 'A1', 'B3', 'C3', 'D1');
INSERT INTO A_TB_TEST(IIndex, COL01, COL02, COL03, COL04) VALUES(SEQ_AUTO_INCRMENT_ONE.NEXTVAL, 'A2', 'B3', 'C3', 'D1');
INSERT INTO A_TB_TEST(IIndex, COL01, COL02, COL03, COL04) VALUES(SEQ_AUTO_INCRMENT_ONE.NEXTVAL, 'A3', 'B3', 'C3', 'D1');
--*/

SELECT * FROM A_TB_TEST;
SELECT COL01,COL02,COL03,COL04 FROM A_TB_TEST GROUP BY COL01,COL02,COL03,COL04;
SELECT * FROM A_TB_TEST ORDER BY COL04,COL03;
SELECT COL01,COL02,COL03,COL04 FROM A_TB_TEST GROUP BY COL01,COL02,COL03,COL04 ORDER BY COL01,COL02,COL03,COL04;
SELECT  COL01,COL02,LISTAGG(COL04, ',') WITHIN GROUP(ORDER BY COL01) FROM A_TB_TEST GROUP BY COL01,COL02; ----结果为A1	B1	D1,D1,D1,D1,D2,D2,D3

SELECT  COL01,COL02,COL03,LISTAGG(COL04, ',') WITHIN GROUP(ORDER BY COL01) FROM A_TB_TEST GROUP BY COL01,COL02,COL03; ----结果为A1	B1	C1	D1,D1,D2,D2,D3和A1 	B1	C2	D1,D1
--COL01、COL02、COL03是看着没问题的，就是COL04有点奇怪
SELECT  COL01,COL02,COL03,LISTAGG(COL04, ',') WITHIN GROUP(ORDER BY COL04) FROM A_TB_TEST GROUP BY COL01,COL02,COL03; --和上句是一样的结果

SELECT  COL01,COL02,COL03,COL04 FROM A_TB_TEST GROUP BY COL01,COL02,COL03,COL04; ----结果为
/*
A1	B1	C1	D2
A1	B1	C1	D1
A1	B1	C2	D1
A1	B1	C1	D3
*/

SELECT  COL01,COL02,COL03,COL04 FROM A_TB_TEST GROUP BY COL01,COL04,COL03,COL02 ORDER BY COL04; ----结果为
/*
A1	B1	C1	D2
A1	B1	C1	D3
A1	B1	C1	D1
A1	B1	C2	D1
*/
--这是因为是先按COL04组合，然后再按COL03组合，所以看着更符合要求了